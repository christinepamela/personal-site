<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Cap Table Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .calculator-section {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f8f9fa;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #666;
        }
        input {
            width: 200px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            margin-top: 10px;
            font-weight: bold;
            color: #28a745;
        }
    </style>
</head>
<body>
    <h1>Simple Cap Table Calculator</h1>

    <!-- Initial Setup -->
    <div class="calculator-section">
        <h2>1. Company Setup</h2>
        <div class="input-group">
            <label>Company Name:</label>
            <input type="text" id="companyName">
        </div>
        <div class="input-group">
            <label>Total Authorized Shares:</label>
            <input type="number" id="authorizedShares" value="12000000">
        </div>
        <div class="input-group">
            <label>Initial Share Price:</label>
            <input type="number" id="initialSharePrice" value="0.01" step="0.01">
        </div>
    </div>

    <!-- Founders Section -->
    <div class="calculator-section">
        <h2>2. Founders</h2>
        <div id="foundersSection">
            <button onclick="addFounder()">Add Founder</button>
            <div id="foundersList"></div>
        </div>
    </div>

    <!-- Simple Investment Section -->
    <div class="calculator-section">
        <h2>3. Add Investment</h2>
        <select id="investmentType">
            <option value="common">Common Shares</option>
            <option value="preferred">Preferred Shares</option>
            <option value="safe">SAFE Note</option>
        </select>
        <div id="investmentForm"></div>
        <button onclick="addInvestment()">Add Investment</button>
    </div>

    <!-- Cap Table Display -->
    <div class="calculator-section">
        <h2>Current Cap Table</h2>
        <div id="capTableDisplay"></div>
    </div>

    <script>
        let state = {
            companyName: '',
            authorizedShares: 12000000,
            initialSharePrice: 0.01,
            stakeholders: [],
            investments: []
        };

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            updateInvestmentForm();
        });

        function addFounder() {
            const founderDiv = document.createElement('div');
            founderDiv.className = 'input-group';
            founderDiv.innerHTML = `
                <label>Founder Name:</label>
                <input type="text" class="founderName">
                <label>Number of Shares:</label>
                <input type="number" class="founderShares">
                <button onclick="this.parentElement.remove()">Remove</button>
            `;
            document.getElementById('foundersList').appendChild(founderDiv);
        }

        function updateInvestmentForm() {
            const type = document.getElementById('investmentType').value;
            let formHtml = '';

            switch(type) {
                case 'common':
                case 'preferred':
                    formHtml = `
                        <div class="input-group">
                            <label>Investor Name:</label>
                            <input type="text" id="investorName">
                            <label>Number of Shares:</label>
                            <input type="number" id="investorShares">
                            <label>Price per Share:</label>
                            <input type="number" id="sharePrice" step="0.01">
                        </div>
                    `;
                    break;
                case 'safe':
                    formHtml = `
                        <div class="input-group">
                            <label>Investor Name:</label>
                            <input type="text" id="investorName">
                            <label>Investment Amount:</label>
                            <input type="number" id="investmentAmount">
                            <label>Valuation Cap:</label>
                            <input type="number" id="valuationCap">
                            <label>Discount (%):</label>
                            <input type="number" id="discount" min="0" max="100">
                        </div>
                    `;
                    break;
            }

            document.getElementById('investmentForm').innerHTML = formHtml;
        }

        function addInvestment() {
            const type = document.getElementById('investmentType').value;
            const investorName = document.getElementById('investorName').value;

            let investment = {
                name: investorName,
                type: type
            };

            switch(type) {
                case 'common':
                case 'preferred':
                    investment.shares = parseInt(document.getElementById('investorShares').value);
                    investment.price = parseFloat(document.getElementById('sharePrice').value);
                    break;
                case 'safe':
                    investment.amount = parseFloat(document.getElementById('investmentAmount').value);
                    investment.valuationCap = parseFloat(document.getElementById('valuationCap').value);
                    investment.discount = parseFloat(document.getElementById('discount').value);
                    break;
            }

            state.investments.push(investment);
            updateCapTable();
        }

        function updateCapTable() {
            let html = `
                <table>
                    <tr>
                        <th>Stakeholder</th>
                        <th>Type</th>
                        <th>Shares/Investment</th>
                        <th>Price/Share</th>
                        <th>Ownership %</th>
                    </tr>
            `;

            // Add founders
            const founderNames = document.getElementsByClassName('founderName');
            const founderShares = document.getElementsByClassName('founderShares');
            let totalShares = 0;

            for(let i = 0; i < founderNames.length; i++) {
                const shares = parseInt(founderShares[i].value) || 0;
                totalShares += shares;
                html += `
                    <tr>
                        <td>${founderNames[i].value}</td>
                        <td>Common</td>
                        <td>${shares.toLocaleString()}</td>
                        <td>$${state.initialSharePrice}</td>
                        <td>${((shares/state.authorizedShares)*100).toFixed(2)}%</td>
                    </tr>
                `;
            }

            // Add investments
            state.investments.forEach(inv => {
                if(inv.type === 'safe') {
                    html += `
                        <tr>
                            <td>${inv.name}</td>
                            <td>SAFE</td>
                            <td>$${inv.amount.toLocaleString()}</td>
                            <td>Cap: $${inv.valuationCap.toLocaleString()}</td>
                            <td>TBD</td>
                        </tr>
                    `;
                } else {
                    totalShares += inv.shares;
                    html += `
                        <tr>
                            <td>${inv.name}</td>
                            <td>${inv.type}</td>
                            <td>${inv.shares.toLocaleString()}</td>
                            <td>$${inv.price}</td>
                            <td>${((inv.shares/state.authorizedShares)*100).toFixed(2)}%</td>
                        </tr>
                    `;
                }
            });

            // Add unissued shares
            const unissuedShares = state.authorizedShares - totalShares;
            html += `
                <tr>
                    <td>Unissued</td>
                    <td>-</td>
                    <td>${unissuedShares.toLocaleString()}</td>
                    <td>-</td>
                    <td>${((unissuedShares/state.authorizedShares)*100).toFixed(2)}%</td>
                </tr>
            `;

            html += '</table>';
            document.getElementById('capTableDisplay').innerHTML = html;
        }

        // Event listeners
        document.getElementById('investmentType').addEventListener('change', updateInvestmentForm);
    </script>
</body>
</html>
